<main>
  <div class="side-l">

    <div class="filters-header">
      <div class="title-section w-100">
        <h5 class="title">Filtros</h5>
        <mat-icon class="material-symbols-outlined">
          filter_alt
        </mat-icon>
      </div>

      <div class="button-container w-100">
        <button class=" btn-clear mb-3" (click)="clearFilters()">Limpar Filtros</button>
      </div>
    </div>

    <mat-accordion class="accordion">
      <form [formGroup]="form">

        <!-- Setor -->
        <mat-expansion-panel [expanded]="true" class="mat-expansion" (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
          <mat-expansion-panel-header>
            <mat-panel-title>Setor</mat-panel-title>
          </mat-expansion-panel-header>

          <div class="sector-content w-100">
            <mat-form-field>
              <mat-label>Setores</mat-label>
              <mat-select formControlName="sector" multiple>
                @for (sector of sectores; track sector) {
                  <mat-option [value]="sector.codigo">{{sector.codigo}} - {{sector.descricao}}</mat-option>
                }
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-label>CNAE Primário</mat-label>
              <mat-select formControlName="cnaePrimario" multiple>
                @for (cnae of cnaes; track cnae) {
                  <mat-option [value]="cnae.codigo">{{cnae.codigo}} - {{cnae.descricao}}</mat-option>
                }
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-label>CNAE Secundário</mat-label>
              <mat-select formControlName="cnaeSecundario" multiple>
                @for (cnae of cnaes; track cnae) {
                  <mat-option [value]="cnae.codigo">{{cnae.codigo}} - {{cnae.descricao}}</mat-option>
                }
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-label>NCM</mat-label>
              <mat-select formControlName="ncm" multiple>
                @for (ncm of ncm; track ncm) {
                  <mat-option [value]="ncm.codigo">{{ncm.codigo}} - {{ncm.descricao}}</mat-option>
                }
              </mat-select>
            </mat-form-field>


          </div>

        </mat-expansion-panel>

        <!-- Regiao -->
        <mat-expansion-panel class="mat-expansion" (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
          <mat-expansion-panel-header>
            <mat-panel-title>Região</mat-panel-title>
          </mat-expansion-panel-header>

          <div class="region-content drop-structure">

              <mat-form-field>
                <mat-label>Estados</mat-label>
                <mat-select multiple>
                  @for (state of states; track state) {
                    <mat-option [value]="state">{{state}}</mat-option>
                  }
                </mat-select>
              </mat-form-field>


              <mat-form-field>
                <mat-label>Cidades</mat-label>
                <mat-select multiple>
                  @for (city of cities; track city) {
                    <mat-option [value]="city">{{city}}</mat-option>
                  }
                </mat-select>
              </mat-form-field>

              <mat-form-field>
                <mat-label>Bairros</mat-label>
                <mat-select multiple>
                  @for (neighbourhood of neighbourhoods; track neighbourhood) {
                    <mat-option [value]="neighbourhood">{{neighbourhood.name}}</mat-option>
                  }
                </mat-select>
              </mat-form-field>

              <div class="cep w-100">
                <p class="ms-2 f-550">Endereço e CEP</p>
                <mat-form-field>
                  <mat-label>Logradouro</mat-label>
                  <input matInput>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Numero</mat-label>
                  <input matInput>
                </mat-form-field>
                <mat-form-field>
                  <mat-label>CEP</mat-label>
                  <input matInput>
                </mat-form-field>
              </div>

          </div>

        </mat-expansion-panel>

        <!-- Porte -->
        <mat-expansion-panel class="mat-expansion" (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
          <mat-expansion-panel-header>

            <mat-panel-title>Porte</mat-panel-title>
          </mat-expansion-panel-header>

          <div class="company-size-content w-100">
            <mat-form-field>
              <mat-label>Porte Nominal</mat-label>
              <mat-select multiple>
                @for (state of states; track state) {
                  <mat-option [value]="state">{{state.name}}</mat-option>
                }
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Crescimento da empresa</mat-label>
              <mat-select multiple>
                @for (state of states; track state) {
                  <mat-option [value]="state">{{state.name}}</mat-option>
                }
              </mat-select>
            </mat-form-field>

          </div>

        </mat-expansion-panel>

        <!-- Telefones -->
        <mat-expansion-panel class="mat-expansion" (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
          <mat-expansion-panel-header>
            <mat-panel-title>Telefone</mat-panel-title>
          </mat-expansion-panel-header>

          <div class="telephone-container w-100">
            <mat-form-field>
              <mat-label>Telefones</mat-label>
              <mat-select multiple>
                @for (state of states; track state) {
                  <mat-option [value]="state">{{state.name}}</mat-option>
                }
              </mat-select>
            </mat-form-field>
          </div>

        </mat-expansion-panel>

        <!-- Cadastrais -->
        <mat-expansion-panel class="mat-expansion" (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
          <mat-expansion-panel-header>
            <mat-panel-title>Cadastrais</mat-panel-title>
          </mat-expansion-panel-header>

          <div class="company-records-container w-100">

            <div class="opening-date w-100">
              <span class="f-550">Data de abertura</span>
              <mat-form-field>
                <mat-label>Data inicial</mat-label>
                <input matInput [matDatepicker]="initialDate">
                <mat-datepicker-toggle matIconSuffix [for]="initialDate"></mat-datepicker-toggle>
                <mat-datepicker #initialDate ></mat-datepicker>
              </mat-form-field>

              <mat-form-field>
                <mat-label>Data final</mat-label>
                <input matInput [matDatepicker]="finalDate">
                <mat-datepicker-toggle matIconSuffix [for]="finalDate"></mat-datepicker-toggle>
                <mat-datepicker #finalDate></mat-datepicker>
              </mat-form-field>

              <p>Busque por data de abertura durante um determinado período, inserindo uma data inicial e final</p>

            </div>

            <mat-form-field>
              <mat-label>Crescimento da empresa</mat-label>
              <mat-select multiple>
                @for (state of states; track state) {
                  <mat-option [value]="state">{{state.name}}</mat-option>
                }
              </mat-select>
            </mat-form-field>

          </div>

        </mat-expansion-panel>

        <!-- Legais e tribuários -->
        <mat-expansion-panel class="mat-expansion" (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
          <mat-expansion-panel-header>
            <mat-panel-title>Legais e tributários</mat-panel-title>
          </mat-expansion-panel-header>

          <div class="legal-container w-100">

            <mat-form-field>
              <mat-label>Regime tributário</mat-label>
              <mat-select multiple>
                @for (state of states; track state) {
                  <mat-option [value]="state">{{state.name}}</mat-option>
                }
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Enquadramento de porte</mat-label>
              <mat-select multiple>
                @for (state of states; track state) {
                  <mat-option [value]="state">{{state.name}}</mat-option>
                }
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Classificação Jurídica</mat-label>
              <mat-select multiple>
                @for (state of states; track state) {
                  <mat-option [value]="state">{{state.name}}</mat-option>
                }
              </mat-select>
            </mat-form-field>

            <mat-form-field>
              <mat-label>Natureza Jurídica</mat-label>
              <mat-select multiple>
                @for (legalNature of legalNatures; track legalNature) {
                  <mat-option [value]="legalNature">{{legalNature.codigo}} - {{legalNature.descricao}}</mat-option>
                }
              </mat-select>
            </mat-form-field>

          </div>

        </mat-expansion-panel>

        <!-- CNPJ -->
        <mat-expansion-panel class="mat-expansion" (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">
          <mat-expansion-panel-header>
            <mat-panel-title>Busca por CNPJs</mat-panel-title>
          </mat-expansion-panel-header>
          <div class="cnpj-container w-100">

              <mat-form-field class="example-full-width">
                <mat-label>CNPJ</mat-label>
                <input matInput placeholder="" value="">
              </mat-form-field>

          </div>
        </mat-expansion-panel>

      </form>
      <div class="button-container">
        <button class="w-100 btn-filter" (click)="search()">Buscar empresas <mat-icon class="mat-18">search</mat-icon></button>
        <div class="spacer w-100 mt-2 mb-2"></div>
      </div>
    </mat-accordion>

  </div>
</main>

